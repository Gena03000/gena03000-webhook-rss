// Script simple (pseudo-code)
fetch('https://tonrss.com/feed')
  .then(res => analyseFlux(res))
  .then(articles => {
     if (visiteCouncilBluffs && referrer == "direct") {
        déclencherNotification("Nouvel article ciblé !")
        envoyerVersCampagnePublicitaire("localisée Iowa")
     }
  })

if (ville === "Council Bluffs" && source === "Direct") {
  if (durée < 10s || pagesVisitées < 2) {
    botScore = 0.9
  } else {
    botScore = 0.2
  }
}
if (ville === "Council Bluffs" && source === "Direct") {
  if (durée < 10s || pagesVisitées < 2) {
    botScore = 0.9
  } else {
    botScore = 0.2
  }
}
const fs = require('fs');

// Charge les visites enregistrées (fichier JSON)
let sessions = JSON.parse(fs.readFileSync('./sessions.json'));

// Définir les seuils dans un fichier config séparé
const config = JSON.parse(fs.readFileSync('./config.json'));

// Analyse les sessions une à une
sessions.forEach(session => {
  const { ville, source, durée, pagesVisitées } = session;
  let botScore = 0;

  if (ville === "Council Bluffs" && source === "Direct") {
    botScore = (durée < config.seuil_duree || pagesVisitées < config.seuil_pages) ? 0.9 : 0.2;

    // Action selon score
    if (botScore > config.seuil_bot) {
      console.log(`[BOT détecté] Session: ${JSON.stringify(session)}`);
      // Ici tu pourrais bloquer, rediriger, logguer...
    } else {
      console.log(`[HUMAIN possible] Session: ${JSON.stringify(session)}`);
      // Message ciblé ou activation de pixel de pub
    }
  }
});
{
  "seuil_duree": 10,
  "seuil_pages": 2,
  "seuil_bot": 0.5
}
const fs = require('fs');

// Essaie d'abord de lire et parser le fichier
let sessions = [];

try {
  const data = fs.readFileSync('./sessions.json', 'utf8');
  sessions = JSON.parse(data);
} catch (error) {
  console.error("Erreur de lecture du fichier sessions.json :", error);
}




